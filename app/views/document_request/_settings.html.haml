%p
  %label= l(:label_project)
  = select_tag("settings[project_id]", project_tree_options_for_select(Project.active.all(:order => :name), :selected => (Project.find(@settings[:project_id]) rescue nil)), :prompt => t(:prompt_please_select))
  - enabled_module = EnabledModule.where(name: 'document_request').last
  - project_id = enabled_module.project_id if enabled_module
  - project = Project.find(project_id) if project_id
  = image_tag 'true.png' if project

%hr

%p
  %label= l(:label_document_tracker)
  = select_tag("settings[tracker_id]", options_from_collection_for_select(Tracker.all(:order => :position), :id, :name, (@settings[:tracker_id].to_i rescue nil)), :prompt => t(:prompt_please_select))

%p
  %label= l(:label_document_for_field)
  = select_tag("settings[document_for_field_id]", options_from_collection_for_select(IssueCustomField.all, :id, :name, (@settings[:document_for_field_id].to_i rescue nil)), :prompt => t(:prompt_please_select))

%p
  %label= l(:label_company_name_field)
  = select_tag("settings[company_name_field_id]", options_from_collection_for_select(IssueCustomField.all, :id, :name, (@settings[:company_name_field_id].to_i rescue nil)), :prompt => t(:prompt_please_select))

%hr

%p
  %label= l(:label_other_category)
  - @options_for_other_category = begin Project.find(@settings[:project_id]).issue_categories rescue IssueCategory.all end
  = select_tag("settings[other_category_id]", options_from_collection_for_select(@options_for_other_category, :id, :name, (@settings[:other_category_id].to_i rescue nil)), :prompt => t(:prompt_please_select))

%p
  %label= l(:label_assigned_to)
  = select_tag("settings[assigned_to_id]", principals_options_for_select(Principal.active.all, (Principal.find(@settings[:assigned_to_id]) rescue nil)), :prompt => t(:prompt_please_select))

%hr

%p
  %label= l(:label_roaming_tracker)
  = select_tag("settings[roaming_tracker_id]", options_from_collection_for_select(Tracker.all(:order => :position), :id, :name, (@settings[:roaming_tracker_id].to_i rescue nil)), :prompt => t(:prompt_please_select))

%p
  %label= l(:label_roaming_category)
  - @options_for_roaming_category = begin Project.find(@settings[:project_id]).issue_categories rescue IssueCategory.all end
  = select_tag("settings[roaming_category_id]", options_from_collection_for_select(@options_for_roaming_category, :id, :name, (@settings[:roaming_category_id].to_i rescue nil)), :prompt => t(:prompt_please_select))

%p
  %label= l(:label_roaming_country)
  = select_tag("settings[country_field_id]", options_from_collection_for_select(IssueCustomField.all, :id, :name, (@settings[:country_field_id].to_i rescue nil)), :prompt => t(:prompt_please_select))

%p
  %label= l(:label_roaming_turn_on_date)
  = select_tag("settings[roaming_on_field_id]", options_from_collection_for_select(IssueCustomField.all, :id, :name, (@settings[:roaming_on_field_id].to_i rescue nil)), :prompt => t(:prompt_please_select))

%p
  %label= l(:label_roaming_turn_off_date)
  = select_tag("settings[roaming_off_field_id]", options_from_collection_for_select(IssueCustomField.all, :id, :name, (@settings[:roaming_off_field_id].to_i rescue nil)), :prompt => t(:prompt_please_select))

